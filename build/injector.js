function shouldBeLaunched(e){return e.rules}function matchesTargets(e,t){for(var n=0,c=e.length;c>n;++n){try{var r=new RegExp(e[n])}catch(a){continue}if(r.test(t))return!0}}function shouldRuleBeApplied(e){return e.enabled&&(e.css||e.js)&&e.targets&&matchesTargets(e.targets,location.href)}function launchInjector(e){buffer=document.createDocumentFragment(),e.rules.forEach(applyRule);var t=document.getElementsByTagName("head")[0];t.appendChild(buffer)}function applyRule(e){shouldRuleBeApplied(e)&&(e.css&&e.css.forEach(function(e){e.filepath?injectCssFile(e.filepath):injectCssCode(e.code)}),e.js&&e.js.forEach(function(e){e.filepath?injectJavaScriptFile(e.filepath):injectJavaScriptCode(e.code)}))}function injectJavaScriptCode(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.innerHTML=e,buffer.appendChild(t)}function injectJavaScriptFile(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),buffer.appendChild(t)}function injectCssCode(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,buffer.appendChild(t)}function injectCssFile(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),buffer.appendChild(t)}var buffer;chrome.storage.local.get("injector",function(e){e&&shouldBeLaunched(e.injector)&&launchInjector(e.injector)});